
# Shamelessly taken from BQN crate: https://mlochbaum.github.io/bqncrate/
Split â† {ğ•¨(âŠ¢-Ëœ+`Ã—Â¬)âŠ¸âŠ”ğ•©}

ParseToNumColorCols â† {
	games â† ({((ğ•©âŠ':')+1)â†“ğ•©}Â¨ğ•©)
	spaces â† (games = ' ') = 0
	games â†© spaces /Â¨ games
	games â†© ((games = ';') âˆ¨ (games = ',')) Split Â¨games


	digitMask â† ((games - '0')â‰¤9)
	âŸ¨(digitMask / Â¨Â¨games), âŠ‘Â¨Â¨((digitMask = 0) / Â¨Â¨games)âŸ©
}

Part1 â† {
	# Remove all characters up to ": "
	cols â† ParseToNumColorCols ğ•©
	nums â† âŠ‘cols
	colors â† 1âŠ‘cols

	reds â† â€¢ParsefloatÂ¨Â¨(âˆ¾Â´Â¨('r'=colors)) / Â¨nums
	impossibleReds â† (+Â´Â¨(reds > 12) )â‰  0

	greens â† â€¢ParsefloatÂ¨Â¨(âˆ¾Â´Â¨('g'=colors)) / Â¨nums
	impossibleGreens â† (+Â´Â¨(greens > 13) )â‰  0

	blues â† â€¢ParsefloatÂ¨Â¨(âˆ¾Â´Â¨('b'=colors)) / Â¨nums
	impossibleBlues â† (+Â´Â¨(blues > 14)) â‰  0

	possibleGames â† ((impossibleBlues âˆ¨ impossibleGreens âˆ¨ impossibleReds) = 0)

	+Â´(possibleGames / (â†•(â‰ ğ•©))+1)
}

Part2 â† {
	cols â† ParseToNumColorCols ğ•©
	nums â† âŠ‘cols
	colors â† 1âŠ‘cols
	reds â† â€¢ParsefloatÂ¨Â¨(âˆ¾Â´Â¨('r'=colors)) / Â¨nums
	greens â† â€¢ParsefloatÂ¨Â¨(âˆ¾Â´Â¨('g'=colors)) / Â¨nums
	blues â† â€¢ParsefloatÂ¨Â¨(âˆ¾Â´Â¨('b'=colors)) / Â¨nums
	+Â´(âŒˆÂ´Â¨reds Ã— âŒˆÂ´Â¨greens Ã— âŒˆÂ´Â¨blues)
}

example â† â€¢file.Lines "../input/day2_example.txt"
Part1 example
Part2 example

input â† â€¢file.Lines "../input/day2_input.txt"
Part1 input
Part2 input
